---
title: "A Necessary Evil : On Call Rotation (II)"
date: 2023-03-19T16:24:55+08:00
draft: true
---

一個軟體系統中可能發生的事故並不完全相同，雖然都是非預期的行為，但有些對於使用者來說其實不會造成嚴重影響，而不同領域的事故往往需要由對應的團隊才能有效率的解決。

在非上班時段的工程量能是十分有限的，也無法期望能做到十分高效率的溝通，如何為不同事故安排精準且正確的資源便是非常重要的問題。


## 事故分級

多數情況會依照嚴重性和受影響客戶比例來做分級，可能 2B 的產品會需要特別照顧戰略性客戶，但思維同樣都是比例原則。

比如發生問題的只是個試用階段的附加功能，並不影響主要使用情境，也尚未和客戶承諾穩定性的話，可以將警告延後至上班時間再來發送。

但若是問題發生在產品功能的核心環節，比如結帳失敗或是無法驗證入場券時，就會是相對緊急的需求，因為即使只發生一次也都會有失去客戶或是賠償的風險。

## 縱深防禦

另個有趣的點是問題性質的分佈，以當前隨處可見的 Saas 產品來說，高頻率發生的問題都是短暫的網路波動和基礎建設超載，其次是第三方服務的異常，主因是它們不像邏輯上的錯誤能被精準定位修復。

這時若正好輪到一個主要負責產品商業邏輯的後端工程師接手，他多半會沒有頭緒，最終還是得求助更熟悉基礎建設同事，而負責基礎建設的人也會產生即使不是自己 On Call 也需要關注求助訊息的心理壓力。

這是許多中小型團隊的困境，為了分攤帳面上的壓力所以讓所有人一同排班來輪流負責所有問題，但每個人知識與技能並不盡相同，頻繁找人求助長久下來溝通成本也相當可觀。

依照事故問題的性質與比例規劃多層架構是更有效率的做法，比如八成以上都是網路波動問題時，就可以由 Infrastructure 或 SRE team 作為第一線，因為高機率會被他們直接解決。

而產品研發工程師則是作為第二線，因為一開始就把他們叫上來大概也不會解決問題。
